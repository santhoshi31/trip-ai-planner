import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: My Trip Starting from POLLACHI To  GERMANY, for 7 Days, for 1 PERSON  with the Affordable, Give me a Hotels option list with Hotel Name, Hotel address, Price, Hotel image URL, Geo coordinates, Rating, descriptions and suggest itinerary with place Name, place Details, place Image URL, Geo Coordinates, ticket pricing, rating, how much Time it takes to travel for each location, Each day plan with best time to visit the place, Include the travel cost and travel type with cost of it from place to place, Suggest Me the food that is popular in that place. in JSON form"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"Germany\",\n    \"duration\": 7,\n    \"traveler_count\": 1,\n    \"budget\": \"affordable\",\n    \"itinerary\": [\n      {\n        \"day\": 1,\n        \"activities\": [\n          {\n            \"name\": \"Fly from Pollachi to Frankfurt\",\n            \"details\": \"Direct flights from Pollachi to Frankfurt are unlikely. You will likely need to connect through a major hub like Dubai or Istanbul. This will likely take around 12-15 hours. \",\n            \"image_url\": \"https://www.flightconnections.com/images/flights/flight-connections-map-worldwide.png\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": \"Prices vary depending on the time of year and airline. Expect to pay between $500 - $1000 for roundtrip tickets.\",\n            \"rating\": null,\n            \"travel_time\": \"12-15 hours (including layover)\",\n            \"best_time_to_visit\": \"Anytime, though you may find cheaper flights during the off-season (November-March)\"\n          },\n          {\n            \"name\": \"Check in at Hotel\",\n            \"details\": \"Once you arrive in Frankfurt, head to your hotel. Here are some affordable options:\",\n            \"image_url\": null,\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": null,\n            \"rating\": null,\n            \"travel_time\": \"1-2 hours\",\n            \"best_time_to_visit\": \"Anytime\"\n          },\n          {\n            \"name\": \"Dinner in Frankfurt\",\n            \"details\": \"Enjoy a delicious German meal at one of Frankfurt's many restaurants. Be sure to try the local specialties, such as Frankfurter sausages, Apfelwein (apple wine), and handkäse mit Musik (a type of cheese with onions and vinegar)\",\n            \"image_url\": \"https://www.foodandwine.com/sites/default/files/styles/1000x562/public/frankfurter-sausage-stand.jpg?itok=1n1_r-gH\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": null,\n            \"rating\": null,\n            \"travel_time\": null,\n            \"best_time_to_visit\": \"Dinner time (6-10pm)\"\n          }\n        ],\n        \"travel_cost\": {\n          \"flight\": \"Estimate $500-1000\",\n          \"transport\": \"Around $10-20 for public transport to the hotel\"\n        }\n      },\n      {\n        \"day\": 2,\n        \"activities\": [\n          {\n            \"name\": \"Visit the Frankfurt Römer\",\n            \"details\": \"The Frankfurt Römer is a historic building that served as the city hall for centuries. Take a tour to learn about its fascinating history and admire its impressive architecture.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Roemer_Frankfurt_am_Main.jpg/1280px-Roemer_Frankfurt_am_Main.jpg\",\n            \"geo_coordinates\": \"50.1105° N, 8.6446° E\",\n            \"ticket_pricing\": \"Free to enter the courtyard, tours available for around €5-10\",\n            \"rating\": 4.5,\n            \"travel_time\": \"1-2 hours\",\n            \"best_time_to_visit\": \"Morning, before it gets too crowded\"\n          },\n          {\n            \"name\": \"Explore the Main Tower\",\n            \"details\": \"Ascend the Main Tower for panoramic views of Frankfurt and the surrounding countryside. The observation deck offers stunning vistas of the city's skyline and the River Main.\",\n            \"image_url\": \"https://www.maintower.de/uploads/pics/main-tower-frankfurt-panorama.jpg\",\n            \"geo_coordinates\": \"50.1137° N, 8.6662° E\",\n            \"ticket_pricing\": \"Around €10-15 for admission to the observation deck\",\n            \"rating\": 4.2,\n            \"travel_time\": \"2-3 hours\",\n            \"best_time_to_visit\": \"Late afternoon for golden hour views\"\n          }\n        ],\n        \"travel_cost\": {\n          \"transport\": \"Around $10-20 for public transport\"\n        }\n      },\n      {\n        \"day\": 3,\n        \"activities\": [\n          {\n            \"name\": \"Train to Cologne\",\n            \"details\": \"Take a scenic train ride from Frankfurt to Cologne, a vibrant city known for its magnificent cathedral and charming old town.\",\n            \"image_url\": \"https://www.deutschebahn.com/resource/blob/1399102/a7799957458f2e035e8983a525d996e7/data/images/train-journey-image-7956465-de.jpg\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": \"Around €30-50 for a train ticket\",\n            \"rating\": null,\n            \"travel_time\": \"1 hour\",\n            \"best_time_to_visit\": \"Morning for a scenic journey\"\n          },\n          {\n            \"name\": \"Visit Cologne Cathedral\",\n            \"details\": \"Cologne Cathedral is a breathtaking Gothic masterpiece and a UNESCO World Heritage Site. Explore its towering spires, magnificent stained glass windows, and impressive interior.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/K%C3%B6lner_Dom_westfassade.jpg/1280px-K%C3%B6lner_Dom_westfassade.jpg\",\n            \"geo_coordinates\": \"50.9378° N, 6.9583° E\",\n            \"ticket_pricing\": \"Free to enter, guided tours available for around €10-15\",\n            \"rating\": 4.8,\n            \"travel_time\": \"2-3 hours\",\n            \"best_time_to_visit\": \"Morning for the best light and fewer crowds\"\n          }\n        ],\n        \"travel_cost\": {\n          \"train\": \"Around €30-50\"\n        }\n      },\n      {\n        \"day\": 4,\n        \"activities\": [\n          {\n            \"name\": \"Explore Cologne's Old Town\",\n            \"details\": \"Stroll through the charming cobbled streets of Cologne's Old Town, lined with historic buildings, quaint shops, and traditional restaurants. Be sure to check out the Chocolate Museum for a sweet treat.\",\n            \"image_url\": \"https://www.cologne-tourism.com/media/images/articles/cologne_altstadt.jpg\",\n            \"geo_coordinates\": \"50.9375° N, 6.9558° E\",\n            \"ticket_pricing\": \"Free\",\n            \"rating\": 4.5,\n            \"travel_time\": \"3-4 hours\",\n            \"best_time_to_visit\": \"Afternoon, after lunch\"\n          },\n          {\n            \"name\": \"Enjoy a Traditional German Dinner\",\n            \"details\": \"Indulge in a delicious German dinner at one of Cologne's many restaurants. Try local specialties like Kölsch (a local beer), Himmel un Ääd (a potato and apple dish), and Halve Hahn (a sandwich with rye bread, cheese, and a pickle).\",\n            \"image_url\": \"https://www.cologne-tourism.com/media/images/articles/restaurant-cologne.jpg\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": null,\n            \"rating\": null,\n            \"travel_time\": null,\n            \"best_time_to_visit\": \"Dinner time (6-10pm)\"\n          }\n        ],\n        \"travel_cost\": {\n          \"transport\": \"Around $10-20 for public transport\"\n        }\n      },\n      {\n        \"day\": 5,\n        \"activities\": [\n          {\n            \"name\": \"Train to Berlin\",\n            \"details\": \"Take a high-speed train from Cologne to Berlin, the vibrant capital of Germany. The journey is approximately 4 hours long.\",\n            \"image_url\": \"https://www.deutschebahn.com/resource/blob/1399102/a7799957458f2e035e8983a525d996e7/data/images/train-journey-image-7956465-de.jpg\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": \"Around €50-80 for a train ticket\",\n            \"rating\": null,\n            \"travel_time\": \"4 hours\",\n            \"best_time_to_visit\": \"Morning for a scenic journey\"\n          },\n          {\n            \"name\": \"Check in at Hotel\",\n            \"details\": \"Here are some affordable hotel options in Berlin:\",\n            \"image_url\": null,\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": null,\n            \"rating\": null,\n            \"travel_time\": \"1-2 hours\",\n            \"best_time_to_visit\": \"Anytime\"\n          },\n          {\n            \"name\": \"Explore the Brandenburg Gate\",\n            \"details\": \"The Brandenburg Gate is a historic monument that symbolizes German unity. Take a walk through the gate and admire its neoclassical architecture. You can also visit the nearby Reichstag Building (German Parliament) for a guided tour.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Brandenburger_Tor_01.jpg/1280px-Brandenburger_Tor_01.jpg\",\n            \"geo_coordinates\": \"52.5163° N, 13.3777° E\",\n            \"ticket_pricing\": \"Free\",\n            \"rating\": 4.7,\n            \"travel_time\": \"2-3 hours\",\n            \"best_time_to_visit\": \"Evening for a beautiful illuminated view\"\n          }\n        ],\n        \"travel_cost\": {\n          \"train\": \"Around €50-80\"\n        }\n      },\n      {\n        \"day\": 6,\n        \"activities\": [\n          {\n            \"name\": \"Visit the Berlin Wall Memorial\",\n            \"details\": \"The Berlin Wall Memorial is a poignant reminder of the city's divided past. Explore the preserved sections of the wall and learn about its history and the people who lived through its existence.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/East_Side_Gallery_%282014%29.jpg/1280px-East_Side_Gallery_%282014%29.jpg\",\n            \"geo_coordinates\": \"52.5038° N, 13.4366° E\",\n            \"ticket_pricing\": \"Free\",\n            \"rating\": 4.6,\n            \"travel_time\": \"2-3 hours\",\n            \"best_time_to_visit\": \"Anytime, especially during the day\"\n          },\n          {\n            \"name\": \"Explore Museum Island\",\n            \"details\": \"Museum Island is a UNESCO World Heritage Site that houses five world-class museums, including the Pergamon Museum, the Neues Museum, and the Altes Museum. Spend a day exploring these cultural treasures.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Berlin_Museumsinsel_Panorama_%282012%29.jpg/1280px-Berlin_Museumsinsel_Panorama_%282012%29.jpg\",\n            \"geo_coordinates\": \"52.5194° N, 13.4078° E\",\n            \"ticket_pricing\": \"Individual museum admission fees vary, combination tickets available\",\n            \"rating\": 4.8,\n            \"travel_time\": \"Full day\",\n            \"best_time_to_visit\": \"Morning for the best chance to see everything\"\n          }\n        ],\n        \"travel_cost\": {\n          \"transport\": \"Around $10-20 for public transport\"\n        }\n      },\n      {\n        \"day\": 7,\n        \"activities\": [\n          {\n            \"name\": \"Relax in Tiergarten Park\",\n            \"details\": \"Escape the bustle of the city and enjoy a relaxing stroll through Tiergarten Park, Berlin's largest urban park. You can rent a bike to explore its paths, have a picnic, or simply relax by the lake.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Gro%C3%9Fer_Stern_Tiergarten.jpg/1280px-Gro%C3%9Fer_Stern_Tiergarten.jpg\",\n            \"geo_coordinates\": \"52.5154° N, 13.3512° E\",\n            \"ticket_pricing\": \"Free\",\n            \"rating\": 4.4,\n            \"travel_time\": \"2-3 hours\",\n            \"best_time_to_visit\": \"Afternoon for sunshine\"\n          },\n          {\n            \"name\": \"Enjoy a Farewell Dinner\",\n            \"details\": \"Savour a delicious final German meal at one of Berlin's many restaurants. Try local specialties like Currywurst (sausage with curry ketchup), Berliner Weisse (a sour beer), and Eisbein (pork knuckle).\",\n            \"image_url\": \"https://www.berlin.de/images/berlin/en/leben/essen-trinken/restaurants-bars/currywurst-restaurant.jpg\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": null,\n            \"rating\": null,\n            \"travel_time\": null,\n            \"best_time_to_visit\": \"Dinner time (6-10pm)\"\n          },\n          {\n            \"name\": \"Fly back from Berlin to Pollachi\",\n            \"details\": \"Catch your flight back from Berlin to Pollachi. Depending on your connections, it could take around 12-15 hours.\",\n            \"image_url\": \"https://www.flightconnections.com/images/flights/flight-connections-map-worldwide.png\",\n            \"geo_coordinates\": null,\n            \"ticket_pricing\": \"Prices vary depending on the time of year and airline. Expect to pay between $500 - $1000 for roundtrip tickets.\",\n            \"rating\": null,\n            \"travel_time\": \"12-15 hours (including layover)\",\n            \"best_time_to_visit\": \"Anytime, though you may find cheaper flights during the off-season (November-March)\"\n          }\n        ],\n        \"travel_cost\": {\n          \"flight\": \"Estimate $500-1000\",\n          \"transport\": \"Around $10-20 for public transport to the airport\"\n        }\n      }\n    ],\n    \"hotels\": [\n      {\n        \"name\": \"The Circus Hotel Frankfurt\",\n        \"address\": \"Grosse Friedberger Str. 22, 60313 Frankfurt am Main, Germany\",\n        \"price\": \"€60-€80 per night\",\n        \"image_url\": \"https://www.booking.com/hotel/de/circus.en-gb.html\",\n        \"geo_coordinates\": \"50.1171° N, 8.6547° E\",\n        \"rating\": 4.2,\n        \"description\": \"A trendy hotel with a modern design and a lively atmosphere.\"\n      },\n      {\n        \"name\": \"Hotel Indigo Frankfurt\",\n        \"address\": \"Kleine Hochstr. 1, 60311 Frankfurt am Main, Germany\",\n        \"price\": \"€70-€90 per night\",\n        \"image_url\": \"https://www.ihg.com/hotelindigo/hotels/us/en/frankfurt/frahf/hoteldetail\",\n        \"geo_coordinates\": \"50.1116° N, 8.6663° E\",\n        \"rating\": 4.3,\n        \"description\": \"A stylish hotel with a great location in the heart of the city.\"\n      },\n      {\n        \"name\": \"The Motel One Frankfurt-Römer\",\n        \"address\": \"Am Römer 1-3, 60311 Frankfurt am Main, Germany\",\n        \"price\": \"€50-€70 per night\",\n        \"image_url\": \"https://www.motelone.com/en/hotels/frankfurt/frankfurt-roemer\",\n        \"geo_coordinates\": \"50.1109° N, 8.6453° E\",\n        \"rating\": 4,\n        \"description\": \"A modern and affordable hotel with a prime location near the Römer.\"\n      },\n      {\n        \"name\": \"The Circus Hotel Cologne\",\n        \"address\": \"Friesenplatz 10, 50667 Cologne, Germany\",\n        \"price\": \"€55-€75 per night\",\n        \"image_url\": \"https://www.booking.com/hotel/de/circus-cologne.en-gb.html\",\n        \"geo_coordinates\": \"50.9389° N, 6.9573° E\",\n        \"rating\": 4,\n        \"description\": \"A trendy hotel with a modern design and a lively atmosphere.\"\n      },\n      {\n        \"name\": \"Hotel Indigo Cologne\",\n        \"address\": \"Hohenzollernring 51-59, 50672 Cologne, Germany\",\n        \"price\": \"€65-€85 per night\",\n        \"image_url\": \"https://www.ihg.com/hotelindigo/hotels/us/en/cologne/clgkc/hoteldetail\",\n        \"geo_coordinates\": \"50.9367° N, 6.9548° E\",\n        \"rating\": 4.1,\n        \"description\": \"A stylish hotel with a great location in the heart of the city.\"\n      },\n      {\n        \"name\": \"The Motel One Cologne-Neumarkt\",\n        \"address\": \"Neumarkt 18, 50667 Cologne, Germany\",\n        \"price\": \"€45-€65 per night\",\n        \"image_url\": \"https://www.motelone.com/en/hotels/cologne/cologne-neumarkt\",\n        \"geo_coordinates\": \"50.9374° N, 6.9568° E\",\n        \"rating\": 3.8,\n        \"description\": \"A modern and affordable hotel with a central location.\"\n      },\n      {\n        \"name\": \"The Circus Hotel Berlin\",\n        \"address\": \"Friedrichstr. 105, 10117 Berlin, Germany\",\n        \"price\": \"€60-€80 per night\",\n        \"image_url\": \"https://www.booking.com/hotel/de/circus-berlin.en-gb.html\",\n        \"geo_coordinates\": \"52.5187° N, 13.3859° E\",\n        \"rating\": 4.1,\n        \"description\": \"A trendy hotel with a modern design and a lively atmosphere.\"\n      },\n      {\n        \"name\": \"Hotel Indigo Berlin\",\n        \"address\": \"Alexanderplatz 1, 10178 Berlin, Germany\",\n        \"price\": \"€70-€90 per night\",\n        \"image_url\": \"https://www.ihg.com/hotelindigo/hotels/us/en/berlin/beraa/hoteldetail\",\n        \"geo_coordinates\": \"52.5207° N, 13.4119° E\",\n        \"rating\": 4.2,\n        \"description\": \"A stylish hotel with a great location near Alexanderplatz.\"\n      },\n      {\n        \"name\": \"The Motel One Berlin-Alexanderplatz\",\n        \"address\": \"Alexanderstr. 10, 10178 Berlin, Germany\",\n        \"price\": \"€50-€70 per night\",\n        \"image_url\": \"https://www.motelone.com/en/hotels/berlin/berlin-alexanderplatz\",\n        \"geo_coordinates\": \"52.5204° N, 13.4112° E\",\n        \"rating\": 3.9,\n        \"description\": \"A modern and affordable hotel with a central location.\"\n      }\n    ],\n    \"popular_food\": [\n      \"Frankfurter sausages\",\n      \"Apfelwein (apple wine)\",\n      \"Handkäse mit Musik (cheese with onions and vinegar)\",\n      \"Kölsch (local beer)\",\n      \"Himmel un Ääd (potato and apple dish)\",\n      \"Halve Hahn (sandwich with rye bread, cheese, and a pickle)\",\n      \"Currywurst (sausage with curry ketchup)\",\n      \"Berliner Weisse (a sour beer)\",\n      \"Eisbein (pork knuckle)\"\n    ]\n  }\n}\n```\n\n**Notes:**\n\n* This itinerary is a suggestion and can be customized to your interests and budget.\n* Flight prices and hotel prices are estimates and may vary depending on availability and time of year.\n* You can find more affordable accommodations by considering hostels or Airbnb rentals.\n* Be sure to check for any visa requirements for Germany.\n* This itinerary is based on using public transportation. You can rent a car if you prefer, but it may be more expensive and less convenient in urban areas.\n* This itinerary does not include costs for meals, souvenirs, or other expenses.\n* Always research and book your transportation, accommodation, and tours in advance, especially during peak season.\n\n**This itinerary is a starting point for planning your trip. Remember to adjust it to your specific preferences and budget.** \n"},
          ],
        },
      ],
    });



    